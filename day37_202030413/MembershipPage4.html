<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Membership</title>
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <link rel="stylesheet" href="../css/bootstrap.css">
    <script src="../js/bootstrap.bundle.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.18/dist/css/bootstrap-select.min.css">

    <!-- Latest compiled and minified JavaScript 한국어 번역 파일 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.18/js/i18n/defaults-ko_KR.min.js"></script>
    <style>
        label {
            display: block;
        }
        #signup_form {
            width: 600px;
        }
        .btn {
            margin: 0;
        }
    </style>
</head>
<body>
    <div class="container text-center mt-5">
        <h2>회원가입</h2>
    </div>
    <form action="#" id="signup_form" method="post" onsubmit="return signup_check()" class="container">
    <label for="member-UserName">회원계정</label>
    <input type="text" id="member-UserName" name="memberUserName" onblur="id_check()" class="form-control">
    <h6 id="id-check-result"></h6>
   
     <!-- <div class="row g-2">
        <div class="col-8">
            <label for="member-Password">비밀번호</label>
            <input type="password" id="member-Password" name="memberPassword" onblur="password_check()" class="form-control">
            <h6 id="password-check-result"></h6>
        </div>
        <div class="col-4 d-grid align-self-">
            <button onclick="change_input_type(event)" class="btn btn-primary">비밀번호 보기</button>
             <input type="button" class="btn btn-primary" value="비밀번호 보기" onclick="change_input_type(event)">
        </div>  
    </div> -->
    <label for="member-Password">비밀번호</label>
    <!-- <div class="row">
        <div class="col-8">
            <div class="input-group">
                <input type="password" id="member-Password" name="memberPassword" onblur="password_check()" class="form-control">
            </div>
            <h6 id="password-check-result"></h6>
        </div>
        <div class="col-4">
            <button onclick="change_input_type(event)" style="display: block" class="btn btn-primary btn-block">비밀번호 보기</button>
        </div>  
    </div> -->

    <div class="row">
        <div class="col-md-12">
          <div class="input-group">
            <input type="password" id="member-Password" name="memberPassword" onblur="password_check()" class="form-control">
            <button onclick="change_input_type(event)" class="btn btn-outline-secondary" type="button" id="button-addon2">비밀번호 보기</button>
          </div>
          <h6 id="password-check-result"></h6>
        </div>
      </div>
      
      
    
    
    

    <label for="password-Confirm">비밀번호 확인</label>
    <input type="password" id="password-Confirm" name="passwordConfirm" onblur="password_confirm()" class="form-control">
    <h6 id="password-confirm-result"></h6>
    
    <label for="member-Name">이름</label>
    <input type="text" id="member-Name" name="memberName" onblur="name_check()" class="form-control">
    <h6 id="name-check-result"></h6>

    <label for="member-Mobile">전화번호</label>
    <!-- <select name="member-Telecom" id="memberTelecom" style="display: inline-block;" class="form-select">;
        <option value="SKT">SKT</option>
        <option value="KT">KT</option>
        <option value="LG">LG</option>
        <option value="MVNO">MVNO</option>
    </select>
    <input type="text" id="member-Mobile" name="memberMobile" onblur="mobile_check()" class="form-control">
    <button id="get-code-btn" onclick="get_code()" disabled class="btn btn-primary">인증번호 받기</button>
    <h6 id="mobile-check-result"></h6> -->

    <div class="row g-2">
        <div class="col-md-3">
          <select name="member-Telecom" id="memberTelecom" class="form-select">
            <option value="SKT">SKT</option>
            <option value="KT">KT</option>
            <option value="LG">LG</option>
            <option value="MVNO">MVNO</option>
          </select>
        </div>
        <div class="col-md-6">
          <input type="text" id="member-Mobile" name="memberMobile" onblur="mobile_check()" class="form-control">
        </div>
        <div class="col-md-3 d-grid">
          <button id="get-code-btn" onclick="get_code()" disabled class="btn btn-primary">인증번호 받기</button><br>
        </div>
      </div>
      <h6 id="mobile-check-result"></h6>
    
    <div class="row">
        <div class="col-md-8">
            <input type="text" id="input-code" name="inputCode" class="form-control">
        </div>
        <div class="col-md-4 d-grid">
            <button id="code-check-btn" onclick="code_check()" class="btn btn-primary">인증번호 확인</button>
        </div>
    </div>  
    
   
    <h6 id="code-check-result"></h6>
    <div id="email-form">
    <label for="member-Email">이메일</label>
    <div class="row">
    <!-- <div class="col"><input type="text" id="member-Email" name="memberEmail" onblur="email_check()" class="form-control"></div> -->
    <div class="input-group">
        <div class="col"><input type="text" id="member-Email" name="memberEmail" onblur="email_check()" class="form-control"></div>
        <div class="input-group-prepend">
            <div class="col"><div class="input-group-text">@</div></div>
        </div>
        <div class="col"><input type="text" id="email-domain" name="emailDomain" class="form-control">
    </div>
    <select id="email-domain-select" onchange="domain_select()" class="form-select">        
        <option value="">직접입력</option>
        <option value="naver.com">naver.com</option>
        <option value="daum.net">daum.net</option>
        <option value="gmail.com">gmail.com</option>
    </select>
    </div>
    </div><br>
    <div>
    <label for="member-Gender">성별</label>
        <div style="display: inline-block;" class="form-check">
            남: <input type="radio" name="gender" value="male" style="display: inline-block;"> 
        </div>
        <div style="display: inline-block;" class="form-check">
            여: <input type="radio" name="gender" value="female" style="display: inline-block;">
        </div>
    </div>
    <h6 id="gender-check-result"></h6> 
    <label for="member-Address" style="display: block;">주소</label>
    <div class="row">
        <div class="col-md-8">
            <input type="text" id="sample6_postcode" placeholder="우편번호" class="form-control">
        </div>
        <div class="col-md-4 d-grid">
            <input type="button" onclick="sample6_execDaumPostcode()" value="우편번호 찾기" class="btn btn-primary"><br>
        </div>
    </div>

    <input type="text" id="sample6_address" placeholder="주소" class="form-control"><br>
    <input type="text" id="sample6_detailAddress" placeholder="상세주소" class="form-control"><br>
    <input type="text" id="sample6_extraAddress" placeholder="참고항목" style="display: block;" class="form-control"><br>
    
    <div class="row">
        <div class="col d-grid">
            <input type="submit" value="가입하기" class="btn btn-primary">
        </div>
    </div>

    </form>
</body>
<script>
    const id_check = () => {
        const id = document.getElementById("member-UserName").value;
        const checkReult = document.getElementById("id-check-result");
        const exp = /^(?=.*[a-z])(?=.*\d)[a-z\d_-]{5,10}$/;
        if (id.length == 0) {
            checkReult.innerHTML = "필수 입력 항목입니다.";
            checkReult.style.color = "red";
            return false;
        } else if(!id.match(exp)) {
            checkReult.innerHTML = "5~10자의 영문 소문자, 숫자와 특수기호(_),(-)만 사용 가능합니다.";
            checkReult.style.color = "red";
            return false;
        } else {
            checkReult.innerHTML = "사용 가능한 아이디입니다"
            checkReult.style.color = "green";
            return true;
        }
    }
    
    const password_check = () => {
        const password = document.getElementById("member-Password").value;
        const checkReult = document.getElementById("password-check-result");
        const exp = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!#$\-_])[A-Za-z\d!#$\-_]{6,18}$/;
        if (password.length == 0) {
            checkReult.innerHTML = "필수 입력 항목입니다.";
            checkReult.style.color = "red";
            return false;
        } else if(!password.match(exp)) {
            checkReult.innerHTML = "6~18자 영문 대 소문자, 숫자, 특수문자(!),(#),($),(-),(_)를 사용하세요.";
            checkReult.style.color = "red";
            return false;
        } else {
            checkReult.innerHTML = "사용 가능한 비밀번호입니다"
            checkReult.style.color = "green";
            return true;
        }
    }
    
    const password_confirm = () => {
        const memberPassword = document.getElementById("member-Password").value;
        const memberPasswordConfirm = document.getElementById("password-Confirm").value;
        const checkResult = document.getElementById("password-confirm-result");
        if(memberPassword == 0) {
            checkResult.innerHTML = "필수 입력 항목입니다";
            checkResult.style.color = "red";
            return false;
        }else if (memberPassword == memberPasswordConfirm) {                                     
            checkResult.innerHTML = "일치합니다";
            checkResult.style.color = "green";
            return true;            
        } else {
            checkResult.innerHTML = "일치하지 않습니다";
            checkResult.style.color = "red";
            return false;   
        }
        
    }

    const name_check = () => {
        const name = document.getElementById("member-Name").value;
        const checkResult = document.getElementById("name-check-result");
        if(name.length == 0) {
            checkResult.innerHTML = "필수 입력 항목입니다.";
            checkResult.style.color = "red";
            return false;
        } else {
            checkResult.innerHTML = ""
            return true;
        }
    }

    const mobile_check = () => {
        const mobile = document.getElementById("member-Mobile").value;
        const checkResult = document.getElementById("mobile-check-result");
        const getCodeBtn = document.getElementById("get-code-btn");
        const exp = /^\d{3}-\d{4}-\d{4}$/;
        if(mobile.length == 0) {
            checkResult.innerHTML = "필수 입력 항목입니다."
            checkResult.style.color = "red";
            getCodeBtn.disabled = true;
            return false;
        } else if(!mobile.match(exp)) {
            checkResult.innerHTML = "010-0000-0000 형식으로 입력해주세요"
            checkResult.style.color = "red";
            getCodeBtn.disabled = true;
            return false;
        } else {
            checkResult.innerHTML = "올바른 전화번호"
            checkResult.style.color = "green";
            getCodeBtn.disabled = false;
            return true;
        }
    }

    //     const email_check = () => {
    //     const email = document.getElementById("member-Email").value;
        
    //     if (email.length == 0) {
    //         return false;
    //     } else {
    //         return true;
    //     }
    // }

    const domain_select = () => {
        const domain = document.getElementById("email-domain-select");
        const domainInput = document.getElementById("email-domain")
        domainInput.value = domain.value;
    }

    function gender_check() {
    var male = document.getElementsByName("gender")[0];
    var female = document.getElementsByName("gender")[1];
    const checkResult = document.getElementById("gender-check-result");    
    if (!male.checked && !female.checked) {
       checkResult.innerHTML = "성별을 선택해주세요";
       checkResult.style.color = "red";
       return false;
    } else {
        checkResult.innerHTML = "";
        return true;
    }
}


  const change_input_type = () => {
        event.preventDefault();
        const passwordInput = document.getElementById("member-Password");
        const passwordReInput = document.getElementById("password-Confirm");
        if (passwordInput.type === "password") {
        passwordInput.type = "text";
        passwordReInput.type = "text";
        event.target.innerText = "비밀번호 숨기기"
        } else {
        passwordInput.type = "password";
        passwordReInput.type = "password";
        event.target.innerText = "비밀번호 보기"
        }
        return false;
    }

    const signup_check = () => {
        const id = document.getElementById("member-UserName");
        const password = document.getElementById("member-Password");
        const passwordConfirm = document.getElementById("password-Confirm");
        const name = document.getElementById("member-Name");
        const mobile = document.getElementById("member-Mobile");
        const code = document.getElementById("input-code");
        
        // if(!id_check()) {
        //     id.focus();
        //     return false;
        // }else if(!password_check()) {
        //     password.focus();
        //     return false;
        // } else if(!password_confirm()) {
        //     passwordConfirm.focus();
        //     return false;
        // } else if(!name_check()) {
        //     name.focus();
        //     return false;
        // } else if(!mobile_check()) {
        //     mobile.focus();
        //     return false;
        // } else if(!code_check()) {
        //     code.focus();
        //     return false;
        // } else if(!gender_check()) {
        //     return false;
        // } else {
        //     document.getElementById("signup_form").submit();
        //     // return true;        
        // }

        let pass = true;

        if (!id_check()) {
        id.focus();
        pass = false;
        }

        if (!password_check()) {
        password.focus();
        pass = false;
        }

        if (!password_confirm()) {
        passwordConfirm.focus();
        pass = false;
        }

        if (!name_check()) {
        name.focus();
        pass = false;
        }

        if (!mobile_check()) {
        mobile.focus();
        pass = false;
        }

        if (!code_check()) {
        code.focus();
        pass = false;
        }

        if (!gender_check()) {
        pass = false;
        }

        if (pass) {
        document.getElementById("signup_form").submit();
        }

    }
        

    let random_code = "";


    const get_code = () => {
        random_code = Math.random().toString().substr(2, 6); // 0.을 제외한 첫 6자리 추출
        alert(random_code);
        return random_code;
    }

    const code_check = () => {
        event.preventDefault();
        const code = document.getElementById("input-code").value;
        const checkResult = document.getElementById("code-check-result");
        const codeCheckBtn = document.getElementById("code-check-btn");
        if(code === "") {
            checkResult.innerHTML = "인증번호를 입력해주세요";
            checkResult.style.color = "red";
        } else if (code === random_code) {
            checkResult.innerHTML = "일치합니다"
            checkResult.style.color = "green";
            return true;
        } else {
            checkResult.innerHTML = "일치하지 않습니다"
            checkResult.style.color = "red";
            return false;
        }
        
    }

function sample6_execDaumPostcode() {
        new daum.Postcode({
            oncomplete: function(data) {
                // 팝업에서 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.

                // 각 주소의 노출 규칙에 따라 주소를 조합한다.
                // 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
                var addr = ''; // 주소 변수
                var extraAddr = ''; // 참고항목 변수

                //사용자가 선택한 주소 타입에 따라 해당 주소 값을 가져온다.
                if (data.userSelectedType === 'R') { // 사용자가 도로명 주소를 선택했을 경우
                    addr = data.roadAddress;
                } else { // 사용자가 지번 주소를 선택했을 경우(J)
                    addr = data.jibunAddress;
                }

                // 사용자가 선택한 주소가 도로명 타입일때 참고항목을 조합한다.
                if(data.userSelectedType === 'R'){
                    // 법정동명이 있을 경우 추가한다. (법정리는 제외)
                    // 법정동의 경우 마지막 문자가 "동/로/가"로 끝난다.
                    if(data.bname !== '' && /[동|로|가]$/g.test(data.bname)){
                        extraAddr += data.bname;
                    }
                    // 건물명이 있고, 공동주택일 경우 추가한다.
                    if(data.buildingName !== '' && data.apartment === 'Y'){
                        extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                    }
                    // 표시할 참고항목이 있을 경우, 괄호까지 추가한 최종 문자열을 만든다.
                    if(extraAddr !== ''){
                        extraAddr = ' (' + extraAddr + ')';
                    }
                    // 조합된 참고항목을 해당 필드에 넣는다.
                    document.getElementById("sample6_extraAddress").value = extraAddr;
                
                } else {
                    document.getElementById("sample6_extraAddress").value = '';
                }

                // 우편번호와 주소 정보를 해당 필드에 넣는다.
                document.getElementById('sample6_postcode').value = data.zonecode;
                document.getElementById("sample6_address").value = addr;
                // 커서를 상세주소 필드로 이동한다.
                document.getElementById("sample6_detailAddress").focus();
            }
        }).open();
    }
</script>
</html>